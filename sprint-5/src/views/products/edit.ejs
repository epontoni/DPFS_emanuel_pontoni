<%- include('../partials/header', { title: 'Edit Product' }) %>

<main class="page">
  <div class="container">
    <h1 class="page-title">Edit Product</h1>
    <form
      action="/products/<%= product.id %>"
      method="POST"
      style="max-width: 640px"
    >
      <input type="hidden" name="_method" value="PUT" />
      <div class="form-row">
        <label class="form-label">Nombre del producto</label>
        <input
          name="name"
          class="input"
          value="<%= product.title %>"
          placeholder="Ej: Bicicleta urbana"
          required
        />
      </div>
      <div class="form-row">
        <label class="form-label">Descripción</label>
        <textarea
          name="description"
          class="input"
          placeholder="Describe el producto..."
        >
<%= product.description %></textarea
        >
      </div>
      <div class="form-row">
        <label class="form-label">Imagen (URL)</label>
        <input
          name="image"
          class="input"
          value="<%= product.image || '' %>"
          placeholder="Ej: https://example.com/image.jpg"
          type="url"
        />
      </div>
      <div class="form-row">
        <label class="form-label">Categoría</label>
        <input
          name="category"
          class="input"
          value="<%= product.category || '' %>"
          placeholder="Ej: Bikes, Accesorios"
        />
      </div>
      <div class="form-row">
        <label class="form-label">Colores (separados por coma)</label>
        <input
          name="colors"
          class="input"
          value="<%= product.colors || '' %>"
          placeholder="Ej: Rojo, Azul, Negro"
        />
      </div>
      <div class="form-row">
        <label class="form-label">Precio</label>
        <input
          name="price"
          class="input"
          value="<%= product.price %>"
          placeholder="0.00"
          type="number"
          step="0.01"
          required
        />
      </div>
      <div
        style="margin-top: 1rem; display: flex; gap: 12px; align-items: center"
      >
        <button class="btn btn-primary" type="submit">Save</button>
        <button class="btn secondary" type="button" onclick="deleteProduct()">
          Delete
        </button>
      </div>
    </form>
  </div>
</main>

<script>
  function deleteProduct() {
    if (confirm("¿Estás seguro de que quieres eliminar este producto?")) {
      const form = document.createElement("form");
      form.method = "POST";
      form.action = "/products/<%= product.id %>";
      const input = document.createElement("input");
      input.type = "hidden";
      input.name = "_method";
      input.value = "DELETE";
      form.appendChild(input);
      document.body.appendChild(form);
      form.submit();
    }
  }
</script>

<%- include('../partials/footer') %>
